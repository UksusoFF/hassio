<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8'>
<meta http-equiv='Cache-Control' content='no-cache, no-store, must-revalidate' />
<meta http-equiv='Pragma' content='no-cache' />
<meta http-equiv='Expires' content='0' />
<title>Сегодняшний маршрут</title>
<link rel='stylesheet' href='https://unpkg.com/leaflet@1.4.0/dist/leaflet.css' integrity='sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA==' crossorigin=''/>
<script src='https://unpkg.com/leaflet@1.4.0/dist/leaflet.js' integrity='sha512-QVftwZFqvtRNi0ZyCtsznlKSWOStnDORoefr1enyq5mVL4tmKB3S/EnC3rRJcxCPavG10IcrVGSmPh6Qw5lwrg==' crossorigin=''></script>
<script type='text/javascript' src='leaflet.polylineDecorator.js'></script><style>html, body, #map {width: 95%; height: 95%; margin-top: 2%; margin-left: 2.5%;}</style>
</head>
<body>
<div id='map'></div>
<script type='text/javascript'>
massiv = [];
var mymap = L.map('map').setView([55.755826,37.617], 12);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png?{foo}', {foo: 'bar', attribution: "Map data &copy; <a href='https://www.openstreetmap.org/'>OpenStreetMap</a> contributors, <a href='https://creativecommons.org/licenses/by-sa/2.0/'>CC-BY-SA</a>"}).addTo(mymap);
if (massiv.length > 0) {
for (var i=0; i<massiv.length; i++) {
var marker = L.marker(massiv[i]).addTo(mymap);
marker.bindTooltip((i+1).toString());}
var polyline = L.polyline(massiv, {color: 'red', weight: 2, opacity: 0.5}).addTo(mymap);
mymap.fitBounds(polyline.getBounds());
polyline.remove();}
if (massiv.length > 1) {
line = massiv[0];
for (var i=1; i<massiv.length; i++) {
var polyline = L.polyline([line, massiv[i]], {color: 'red', weight: 2, opacity: 0.7}).addTo(mymap);
var arrowHead = L.polylineDecorator(polyline, {patterns: [{offset: '100%', repeat: 0, symbol: L.Symbol.arrowHead({pixelSize: 12, polygon: false, pathOptions: {stroke: true, opacity: 0.7, color: 'red',weight: 2}})}]}).addTo(mymap);
line = massiv[i];}}
</script>
</body>
</html>
